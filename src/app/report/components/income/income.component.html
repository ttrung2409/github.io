<div class="income-report">
  <toolbar>
    <toolbar-title>Báo cáo doanh thu</toolbar-title>
    <actions>
      <button mat-button (click)="flyout.show()">
        <mat-icon>filter_list</mat-icon>        
      </button>
      <button mat-button>
        <mat-icon>view_module</mat-icon>
      </button>
    </actions>    
  </toolbar>
  <div class="content">
    <grid *ngIf="selectedViewBy == 'invoice'"
          [columns]="incomeByInvoiceColumns"
          [dataSource]="invoices"
          [showFooter]="true"
          [isHeaderSticky]="true"
          [isFooterSticky]="true">
    </grid>
    <grid *ngIf="selectedViewBy == 'customer'"
          [columns]="incomeByCustomerColumns"
          [dataSource]="customers"
          [showFooter]="true"
          [isHeaderSticky]="true"
          [isFooterSticky]="true">
    </grid>
  </div>
  
  <flyout #flyout [containerSelector]="'.income-report'" (onShow)="viewByDropdown.focus()">
    <content>
      <div class="ui grid">
        <div class="sixteen wide column">
          <dropdown #viewByDropdown
                    [options]="[{value: 'invoice', text: 'Hóa đơn'}, {value: 'customer', text: 'Khách hàng'}]"
                    [label]="'Xem theo'"
                    [(model)]="viewBy">
          </dropdown>
        </div>
        <div class="sixteen wide column">
          <mat-form-field>
            <input matInput [matDatepicker]="fromDatePicker" placeholder="Từ ngày">
            <mat-datepicker-toggle matSuffix [for]="fromDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #fromDatePicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="sixteen wide column">
          <mat-form-field>
            <input matInput [matDatepicker]="toDatePicker" placeholder="Đến ngày">
            <mat-datepicker-toggle matSuffix [for]="toDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #toDatePicker></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
      <div class="actions">
        <button mat-flat-button (click)="flyout.hide()">Hủy (Esc)</button>
        <button mat-flat-button color="primary" (click)="flyout.hide(); generateReport()">Xem báo cáo (F9)</button>
      </div>
    </content>
    <actions>

    </actions>
  </flyout>
</div>
